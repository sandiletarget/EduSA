{% extends "core/base.html" %}
{% load static %}

{% block content %}
<div class="classroom-page">
  {% include "core/components/grade_nav.html" %}
  <section class="classroom-panel">
    <div class="panel-header">
      <div>
        <p class="panel-kicker">Teacher Panel</p>
        <h2>Assessment Submissions</h2>
        <p class="panel-subtitle">{{ classroom.name }}</p>
      </div>
      <a class="btn btn-outline" href="{% url 'classes:assessment_list' classroom.pk %}">Back to assessments</a>
    </div>

    <div class="panel__body">
      {% for card in assessment_cards %}
        {% with assessment=card.assessment %}
          <div class="panel-item">
            <div>
              <h3>{{ assessment.title }}</h3>
              <p class="muted">{{ assessment.subject_ref.name|default:"Subject" }} Â· {{ assessment.grade_ref|default:"Grade" }}</p>
              {% if assessment.due_date %}
                <span class="chip">Due {{ assessment.due_date }}</span>
              {% endif %}
            </div>
            <div>
              <span class="chip">{{ card.submission_count }} submissions</span>
              <a class="btn btn-primary" href="{% url 'classes:teacher_submission_detail' assessment.id %}">View submissions</a>
            </div>
          </div>
        {% endwith %}
      {% empty %}
        <p class="panel-empty">No assessments available.</p>
      {% endfor %}
    </div>
  </section>
</div>
{% endblock %}
