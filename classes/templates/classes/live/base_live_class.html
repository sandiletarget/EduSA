{% extends "core/base.html" %}
{% load static %}

{# Base layout for live class UI. #}
{% block extra_head %}
  <link rel="stylesheet" href="{% static 'core/css/live_class.css' %}">
  <link rel="stylesheet" href="{% static 'core/css/classroom.css' %}">
  <link rel="stylesheet" href="{% static 'core/css/calculator.css' %}">
{% endblock %}

{% block body_class %}live-class-body app-gradient{% endblock %}

{% block content %}
  {% include "core/components/grade_nav.html" %}
  <div class="live-class-layout" data-role="{% if is_teacher %}teacher{% else %}student{% endif %}" data-room-id="{{ classroom.id }}" data-username="{{ request.user.username }}">
    {% include "classes/live/components/top_bar.html" %}

    <div class="live-class-content">
      <aside class="live-tools" aria-label="Class tools">
        <p class="live-tools__title">Tools</p>
        <button class="tool-btn" type="button" data-panel-toggle="whiteboard">
          <span class="tool-icon">ğŸ“</span>
          <span class="tool-label">Whiteboard</span>
        </button>
        <button class="tool-btn" type="button" data-panel-toggle="notes">
          <span class="tool-icon">ğŸ“’</span>
          <span class="tool-label">Notes</span>
        </button>
        <button class="tool-btn" type="button" data-panel-toggle="chat">
          <span class="tool-icon">ğŸ’¬</span>
          <span class="tool-label">Chat</span>
        </button>
        <button class="tool-btn" type="button" data-panel-toggle="files">
          <span class="tool-icon">ğŸ“‚</span>
          <span class="tool-label">Files</span>
        </button>
        <button class="tool-btn" type="button" data-panel-toggle="calculator">
          <span class="tool-icon">ğŸ§®</span>
          <span class="tool-label">Calculator</span>
        </button>
        <button class="tool-btn" type="button" data-panel-toggle="ai">
          <span class="tool-icon">ğŸ¤–</span>
          <span class="tool-label">AI Assistant</span>
        </button>
      </aside>

      <main class="live-class-center" aria-label="Classroom">
        <div class="live-class-stage">
          {% include "classes/live/components/video_grid.html" %}
        </div>
      </main>

      <aside class="live-class-right" aria-label="Participants and panels">
        <div class="side-panel side-panel--static is-collapsed" data-panel="participants">
          {% include "classes/live/components/participants_panel.html" %}
        </div>

        <div class="live-class-panels" id="livePanels">
          {% include "classes/live/components/chat_panel.html" %}
          {% include "classes/live/components/whiteboard_panel.html" %}
          {% include "classes/live/components/notes_panel.html" %}
          {% include "classes/live/components/files_panel.html" %}
          {% include "classes/live/components/calculator_panel.html" %}
          {% include "classes/live/components/ai_panel.html" %}
        </div>
      </aside>
    </div>

    {% include "classes/live/components/control_bar.html" %}
  </div>

  <script src="{% static 'core/js/live_class.js' %}"></script>
  <script src="{% static 'js/signaling.js' %}"></script>
  <script src="{% static 'js/webrtc.js' %}"></script>
  <script src="{% static 'core/js/calculator.js' %}"></script>
  <script src="{% static 'core/js/formulas.js' %}"></script>
{% endblock %}
